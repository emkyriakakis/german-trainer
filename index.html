<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>German Trainer B1â€“C1</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f4f6f8;
      color: #222;
    }
    header {
      background: #1e3a8a;
      color: white;
      padding: 16px;
      text-align: center;
    }
    main {
      padding: 16px;
      max-width: 800px;
      margin: auto;
    }
    .lesson {
      background: white;
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      animation: fadeIn 0.5s ease;
    }
    button {
      padding: 10px 14px;
      margin-top: 10px;
      border: none;
      border-radius: 6px;
      background: #2563eb;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #1d4ed8;
    }
    .correct {
      color: green;
      font-weight: bold;
    }
    .wrong {
      color: red;
      font-weight: bold;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body>
  <header>
    <h1>ðŸ‡©ðŸ‡ª German Trainer</h1>
    <p>B1 â†’ B2 â†’ C1 â€¢ Daily Practice</p>
  </header>

  <main>
    <div class="lesson" id="lessonBox">
      <h2 id="level">Level: B1</h2>
      <p id="question">Ich ___ mehr Deutsch lernen.</p>

      <input id="answer" type="text" placeholder="Type your answerâ€¦" />
      <br/>
      <button onclick="checkAnswer()">Check</button>

      <p id="feedback"></p>

      <button onclick="nextExercise()">Next exercise</button>
    </div>
  </main>

 <script>
const lessons = [
  { type: "short", level: "B1", topic: "WÃ¼nsche", question: "Ich ___ mehr Deutsch lernen.", answer: "mÃ¶chte" },
  { type: "short", level: "B1", topic: "NebensÃ¤tze", question: "Er bleibt zu Hause, ___ es regnet.", answer: "weil" },

  {
    type: "vocab",
    level: "B1",
    topic: "Alltag â€“ Wortschatz",
    pairs: [
      ["arbeiten", "to work"],
      ["der Alltag", "daily life"],
      ["der Kurs", "course"],
      ["die Pause", "break"]
    ]
  },

  { type: "short", level: "B1", topic: "Vergangenheit", question: "Gestern ___ ich lange gearbeitet.", answer: "habe" },
  { type: "short", level: "B1", topic: "PrÃ¤positionen", question: "Ich warte ___ den Bus.", answer: "auf" },

  {
    type: "deep",
    level: "B1",
    topic: "Alltag & Arbeit",
    text: `
      Anna arbeitet in einem BÃ¼ro. Sie steht jeden Tag um sieben Uhr auf
      und fÃ¤hrt mit dem Zug zur Arbeit. Wenn sie mehr Zeit hÃ¤tte,
      wÃ¼rde sie gerne Deutschkurse besuchen.
    `,
    vocab: [
      ["arbeiten", "to work"],
      ["der Alltag", "daily life"],
      ["der Kurs", "course"]
    ],
    questions: [
      { q: "Wo arbeitet Anna?", a: "in einem BÃ¼ro" },
      { q: "Wann steht sie auf?", a: "um sieben Uhr" },
      { q: "Was wÃ¼rde sie gerne tun?", a: "Deutschkurse besuchen" }
    ]
  }
];

let index = 0;
let draggedWord = null;

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function renderLesson() {
  const box = document.getElementById("lessonBox");
  const lesson = lessons[index];

  if (lesson.type === "short") {
    box.innerHTML = `
      <h2>${lesson.level} â€“ ${lesson.topic}</h2>
      <p>${lesson.question}</p>
      <input id="answer" placeholder="Type your answer" onkeydown="handleEnter(event)"/>
      <br/>
      <button onclick="checkShort()">Check</button>
      <p id="feedback"></p>
      <button onclick="nextLesson()">Next</button>
    `;
  }

  else if (lesson.type === "vocab") {
    const left = shuffle([...lesson.pairs]);
    const right = shuffle([...lesson.pairs.map(p => p[1])]);

    box.innerHTML = `
      <h2>${lesson.level} â€“ Vocabulary matching</h2>
      <p>Drag the German words to the correct English meaning</p>

      <div style="display:flex; gap:20px;">
        <div>
          ${left.map(p => `
            <div draggable="true"
                 ondragstart="draggedWord='${p[0]}'"
                 style="padding:8px;margin:6px;background:#e5e7eb;border-radius:6px;cursor:grab;">
              ${p[0]}
            </div>`).join("")}
        </div>

        <div>
          ${right.map(r => `
            <div ondragover="event.preventDefault()"
                 ondrop="checkDrop('${r}', this)"
                 style="padding:8px;margin:6px;background:#fef3c7;border-radius:6px;min-width:150px;">
              ${r}
            </div>`).join("")}
        </div>
      </div>

      <p id="feedback"></p>
      <button onclick="nextLesson()">Continue</button>
    `;
  }

  else {
    box.innerHTML = `
      <h2>${lesson.level} â€“ Deep lesson: ${lesson.topic}</h2>
      <p>${lesson.text}</p>

      <h3>Vocabulary</h3>
      <ul>
        ${lesson.vocab.map(v => `<li><b>${v[0]}</b> â€“ ${v[1]}</li>`).join("")}
      </ul>

      <h3>Questions</h3>
      ${lesson.questions.map((q, i) =>
        `<p>${q.q}<br/>
         <input id="q${i}" onkeydown="handleEnter(event)"/></p>`
      ).join("")}

      <button onclick="checkDeep()">Check answers</button>
      <p id="feedback"></p>
      <button onclick="nextLesson()">Continue</button>
    `;
  }
}

function handleEnter(e) {
  if (e.key === "Enter") {
    if (lessons[index].type === "short") checkShort();
    else if (lessons[index].type === "deep") checkDeep();
  }
}

function checkShort() {
  const user = document.getElementById("answer").value.trim();
  const correct = lessons[index].answer;
  const fb = document.getElementById("feedback");

  if (user === correct) {
    fb.innerHTML = "âœ” Correct!";
    fb.style.color = "green";
  } else {
    fb.innerHTML = `âœ˜ Correct answer: <b>${correct}</b>`;
    fb.style.color = "red";
  }
}

function checkDrop(english, el) {
  const lesson = lessons[index];
  const pair = lesson.pairs.find(p => p[1] === english);

  if (pair && pair[0] === draggedWord) {
    el.style.background = "#bbf7d0";
    el.innerHTML = "âœ” " + english;
    document.getElementById("feedback").innerHTML = "Correct match!";
    document.getElementById("feedback").style.color = "green";
  } else {
    el.style.background = "#fecaca";
    document.getElementById("feedback").innerHTML =
      `Wrong. Correct: <b>${pair[0]} â†’ ${pair[1]}</b>`;
    document.getElementById("feedback").style.color = "red";
  }
}

function checkDeep() {
  const lesson = lessons[index];
  let out = "", score = 0;

  lesson.questions.forEach((q, i) => {
    const val = document.getElementById("q"+i).value.toLowerCase();
    if (val.includes(q.a.toLowerCase())) {
      out += `<p style="color:green">âœ” ${q.q}</p>`;
      score++;
    } else {
      out += `<p style="color:red">âœ˜ ${q.q}<br/>Correct: <b>${q.a}</b></p>`;
    }
  });

  document.getElementById("feedback").innerHTML =
    out + `<p><b>Score: ${score}/${lesson.questions.length}</b></p>`;
}

function nextLesson() {
  index = (index + 1) % lessons.length;
  renderLesson();
}

renderLesson();
</script>

</body>
</html>
