<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>German Trainer B1â€“C1</title>

<style>
:root {
  --bg: #f4f6f8;
  --card: #ffffff;
  --text: #222;
  --primary: #2563eb;
  --correct: #16a34a;
  --wrong: #dc2626;
}

body.dark {
  --bg: #0f172a;
  --card: #1e293b;
  --text: #e5e7eb;
  --primary: #60a5fa;
}

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
}

header {
  background: var(--primary);
  color: white;
  padding: 16px;
  text-align: center;
}

main {
  max-width: 800px;
  margin: auto;
  padding: 16px;
}

.lesson {
  background: var(--card);
  padding: 16px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  animation: slideIn 0.4s ease;
}

button {
  background: var(--primary);
  color: white;
  border: none;
  padding: 10px 14px;
  margin-top: 10px;
  border-radius: 6px;
  font-size: 16px;
  cursor: pointer;
}

#feedback {
  margin-top: 10px;
  animation: fadeIn 0.3s ease;
}

.toggle {
  position: absolute;
  top: 12px;
  right: 12px;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateX(20px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
</style>
</head>

<body>
<button class="toggle" onclick="toggleDark()">ðŸŒ™</button>

<header>
  <h1>ðŸ‡©ðŸ‡ª German Trainer</h1>
  <p>B1 â†’ B2 â†’ C1</p>
</header>

<main>
  <div class="lesson" id="lessonBox"></div>
</main>

<script>
/* ------------------ DATA ------------------ */

const lessons = [
  { type: "short", level: "B1", question: "Ich ___ mehr Deutsch lernen.", answer: "mÃ¶chte" },
  { type: "short", level: "B1", question: "Er bleibt zu Hause, ___ es regnet.", answer: "weil" },

  {
    type: "deep",
    level: "B1",
    text: "Anna arbeitet in einem BÃ¼ro. Sie steht um sieben Uhr auf.",
    questions: [
      { q: "Wo arbeitet Anna?", a: "in einem BÃ¼ro" },
      { q: "Wann steht sie auf?", a: "um sieben Uhr" }
    ]
  }
];

let index = 0;
let answered = false;

/* ------------------ RENDER ------------------ */

function renderLesson() {
  answered = false;
  const box = document.getElementById("lessonBox");
  const lesson = lessons[index];

  if (lesson.type === "short") {
    box.innerHTML = `
      <h2>${lesson.level}</h2>
      <p>${lesson.question}</p>
      <input id="answer" onkeydown="handleEnter(event)" autofocus />
      <p id="feedback"></p>
      <button onclick="check()">Check</button>
      <button onclick="next()">Next</button>
    `;
  } else {
    box.innerHTML = `
      <h2>${lesson.level} â€“ Reading</h2>
      <p>${lesson.text}</p>
      ${lesson.questions.map((q,i)=>`
        <p>${q.q}<br/>
        <input id="q${i}" onkeydown="handleEnter(event)" /></p>
      `).join("")}
      <p id="feedback"></p>
      <button onclick="check()">Check</button>
      <button onclick="next()">Next</button>
    `;
  }
}

/* ------------------ CHECK ------------------ */

function check() {
  if (answered) return;
  answered = true;

  const lesson = lessons[index];
  const fb = document.getElementById("feedback");

  if (lesson.type === "short") {
    const user = document.getElementById("answer").value.trim().toLowerCase();
    if (user === lesson.answer.toLowerCase()) {
      fb.innerHTML = "âœ” Correct!";
      fb.style.color = "green";
    } else {
      fb.innerHTML = `âœ˜ Correct answer: <b>${lesson.answer}</b>`;
      fb.style.color = "red";
    }
  } else {
    let out = "";
    lesson.questions.forEach((q,i)=>{
      const v = document.getElementById("q"+i).value.toLowerCase();
      if (v.includes(q.a.toLowerCase())) {
        out += `<p style="color:green">âœ” ${q.q}</p>`;
      } else {
        out += `<p style="color:red">âœ˜ ${q.q}<br/>Correct: <b>${q.a}</b></p>`;
      }
    });
    fb.innerHTML = out;
  }
}

/* ------------------ NEXT ------------------ */

function next() {
  index = (index + 1) % lessons.length;
  renderLesson();
}

/* ------------------ ENTER KEY ------------------ */

function handleEnter(e) {
  if (e.key === "Enter") {
    if (!answered) check();
    else next();
  }
}

/* ------------------ DARK MODE ------------------ */

function toggleDark() {
  document.body.classList.toggle("dark");
}

/* ------------------ START ------------------ */

renderLesson();
</script>
</body>
</html>
